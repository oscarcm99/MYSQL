DROP DATABASE IF EXISTS HUMAN;
CREATE DATABASE HUMAN;
USE HUMAN;
CREATE TABLE PERSONA (nombre VARCHAR(15), apellido1 VARCHAR(15), apellido2 VARCHAR(15), edad INT, PRIMARY KEY(nombre, apellido1, apellido2));
CREATE TABLE PRODUCTO (ID INT, PRIMARY KEY (ID));
CREATE TABLE PEDIDO (cantidad INT, nombre_PERSONA VARCHAR(15), apellido1_PERSONA VARCHAR(15), apellido2_PERSONA VARCHAR(15), ID_PRODUCTO INT, FOREIGN KEY(nombre_PERSONA, apellido1_PERSONA, apellido2_PERSONA) REFERENCES PERSONA(nombre,apellido1,apellido2), FOREIGN KEY (ID_PRODUCTO) REFERENCES PRODUCTO(ID));
ALTER TABLE PEDIDO DROP FOREIGN KEY PEDIDO_ibfk_1;
ALTER TABLE PERSONA ADD COLUMN DNI VARCHAR(9);
ALTER TABLE PERSONA MODIFY DNI CHAR(9) FIRST;
ALTER TABLE PERSONA ADD COLUMN sexo ENUM ('h','m');
ALTER TABLE PERSONA DROP PRIMARY KEY;
ALTER TABLE PEDIDO DROP COLUMN nombre_PERSONA;
ALTER TABLE PEDIDO DROP COLUMN apellido1_PERSONA;
ALTER TABLE PEDIDO DROP COLUMN apellido2_PERSONA;
ALTER TABLE PERSONA ADD CONSTRAINT PRIMARY KEY(DNI);
ALTER TABLE PEDIDO ADD COLUMN DNI_PERSONA VARCHAR(9);
ALTER TABLE PEDIDO ADD FOREIGN KEY (DNI_PERSONA) REFERENCES PERSONA(DNI);
ALTER TABLE PERSONA ADD PRIMARY KEY(nombre, apellido1);
